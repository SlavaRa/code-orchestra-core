package jetbrains.mps.nanoc.plugin;

/*Generated by MPS */

import java.io.File;
import com.intellij.util.SystemProperties;
import com.intellij.execution.process.ProcessHandler;
import com.intellij.execution.ExecutionException;
import jetbrains.mps.execution.api.commands.ProcessHandlerBuilder;

public class Exec_Command {
  private File myWorkingDirectory = new File(SystemProperties.getUserHome());
  private String myProgramParameters;

  public Exec_Command() {
  }

  public Exec_Command setWorkingDirectory(File workingDirectory) {
    if (workingDirectory != null) {
      myWorkingDirectory = workingDirectory;
    }
    return this;
  }

  public Exec_Command setProgramParameters(String programParameters) {
    if (programParameters != null) {
      myProgramParameters = programParameters;
    }
    return this;
  }

  public ProcessHandler createProcess(File executable) throws ExecutionException {
    return new ProcessHandlerBuilder().append(Exec_Command.protect(executable.getAbsolutePath())).append(myProgramParameters).build(myWorkingDirectory);
  }

  private static String protect(String rawString) {
    if (rawString.contains(" ")) {
      return "\"" + rawString + "\"";
    }
    return rawString;
  }
}
