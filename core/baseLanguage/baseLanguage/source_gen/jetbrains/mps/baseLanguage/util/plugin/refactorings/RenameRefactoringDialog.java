package jetbrains.mps.baseLanguage.util.plugin.refactorings;

/*Generated by MPS */

import jetbrains.mps.ide.dialogs.BaseDialog;
import javax.swing.JPanel;
import javax.swing.JTextField;
import jetbrains.mps.smodel.SNode;
import java.awt.Frame;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import javax.swing.JLabel;
import jetbrains.mps.smodel.ModelAccess;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import javax.swing.JComponent;
import jetbrains.mps.ide.dialogs.DialogDimensionsSettings;

public class RenameRefactoringDialog extends BaseDialog {
  private JPanel myPanel;
  private JTextField myName = new JTextField();
  private SNode myReference;

  public RenameRefactoringDialog(Frame frame, String entity, final SNode namedNode) {
    super(frame, "Rename " + entity);
    this.myReference = namedNode;
    this.myPanel = new JPanel(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    this.myPanel.add(new JLabel("Name "), c);
    c = new GridBagConstraints();
    c.fill = GridBagConstraints.HORIZONTAL;
    c.gridx = 1;
    c.weightx = 1;
    this.myPanel.add(this.myName, c);
    c = new GridBagConstraints();
    c.gridy = 1;
    c.weighty = 1;
    this.myPanel.add(new JPanel(), c);
    ModelAccess.instance().runReadAction(new Runnable() {
      public void run() {
        RenameRefactoringDialog.this.myName.setText(SPropertyOperations.getString(namedNode, "name"));
      }
    });
  }

  @BaseDialog.Button(name = "Refactor", mnemonic = 'R', position = 0, defaultButton = true)
  public void onOk() {
    this.dispose();
    ModelAccess.instance().runWriteActionInCommand(new Runnable() {
      public void run() {
        SPropertyOperations.set(RenameRefactoringDialog.this.myReference, "name", RenameRefactoringDialog.this.myName.getText());
      }
    });
  }

  @BaseDialog.Button(name = "Cancel", mnemonic = 'C', position = 1, defaultButton = false)
  public void onCancel() {
    this.dispose();
  }

  protected JComponent getMainComponent() {
    return this.myPanel;
  }

  public DialogDimensionsSettings.DialogDimensions getDefaultDimensionSettings() {
    return new DialogDimensionsSettings.DialogDimensions(100, 200, 150, 100);
  }
}
