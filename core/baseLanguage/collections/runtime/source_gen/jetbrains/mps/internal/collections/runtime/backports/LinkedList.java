package jetbrains.mps.internal.collections.runtime.backports;

/*Generated by MPS */

import java.io.Serializable;
import java.util.Iterator;
import java.util.ListIterator;

public class LinkedList<T> extends java.util.LinkedList<T> implements Deque<T>, Serializable {
  private static final long serialVersionUID = -7296400805973169021L;

  public LinkedList() {
  }

  public Iterator<T> descendingIterator() {
    return new LinkedList.DescendingIterator<T>(listIterator(size()));
  }

  public boolean offerFirst(T t) {
    addFirst(t);
    return true;
  }

  public boolean offerLast(T t) {
    addLast(t);
    return true;
  }

  public T peekFirst() {
    if (isEmpty()) {
      return null;
    }
    return getFirst();
  }

  public T peekLast() {
    if (isEmpty()) {
      return null;
    }
    return getLast();
  }

  public T pollFirst() {
    return getFirst();
  }

  public T pollLast() {
    return getLast();
  }

  public T pop() {
    return removeFirst();
  }

  public void push(T t) {
    addFirst(t);
  }

  public boolean removeFirstOccurrence(Object o) {
    return remove(o);
  }

  public boolean removeLastOccurrence(Object o) {
    for (ListIterator li = listIterator(size()); li.hasPrevious();) {
      if (LinkedList.eq(o, li.previous())) {
        li.remove();
        return true;
      }
    }
    return false;
  }

  private static boolean eq(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static class DescendingIterator<U> implements Iterator<U> {
    private ListIterator<U> listIterator;

    public DescendingIterator(ListIterator<U> listIterator) {
      this.listIterator = listIterator;
    }

    public boolean hasNext() {
      return listIterator.hasPrevious();
    }

    public U next() {
      return listIterator.previous();
    }

    public void remove() {
      listIterator.remove();
    }
  }
}
