package jetbrains.mps.baseLanguage.tuples.plugin;

/*Generated by MPS */

import jetbrains.mps.plugins.pluginparts.custom.BaseCustomApplicationPlugin;
import jetbrains.mps.logging.Logger;
import java.util.List;
import jetbrains.mps.debug.runtime.java.programState.proxies.ValueWrapperFactory;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.debug.customViewers.CustomViewersManager;

public class CustomViewersInitializer_CustomApplicationPlugin extends BaseCustomApplicationPlugin {
  private static Logger LOG = Logger.getLogger(CustomViewersInitializer_CustomApplicationPlugin.class);

  private List<ValueWrapperFactory> myFactories = ListSequence.fromList(new ArrayList<ValueWrapperFactory>());

  public CustomViewersInitializer_CustomApplicationPlugin() {
  }

  public void doInit() {
    CustomViewersManager manager = CustomViewersManager.getInstance();
    if (manager != null) {
      {
        ValueWrapperFactory factory = new IndexedTupleViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
    }
  }

  public void doDispose() {
    CustomViewersManager manager = CustomViewersManager.getInstance();
    if (manager != null) {
      for (ValueWrapperFactory factory : ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).reversedList()) {
        manager.removeFactory(factory);
      }
    } else if (ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).isNotEmpty()) {
      LOG.error("Cant find custom viewers manager while myFactories nonempty: " + CustomViewersInitializer_CustomApplicationPlugin.this.myFactories);
    }
    ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).clear();
  }
}
