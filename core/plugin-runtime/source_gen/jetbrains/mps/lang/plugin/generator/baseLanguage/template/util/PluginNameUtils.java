package jetbrains.mps.lang.plugin.generator.baseLanguage.template.util;

/*Generated by MPS */

import jetbrains.mps.project.IModule;
import jetbrains.mps.util.NameUtil;
import jetbrains.mps.generator.template.TemplateQueryContext;
import jetbrains.mps.smodel.Generator;

public class PluginNameUtils {
  public static String getModuleShortName(IModule module) {
    String moduleUID = module.getModuleFqName();
    String shortName = NameUtil.shortNameFromLongName(moduleUID);
    String normalShortName = NameUtil.toValidIdentifier(shortName);
    return NameUtil.capitalize(normalShortName);
  }

  public static String getPluginName(IModule module) {
    return getModuleShortName(module) + "_ProjectPlugin";
  }

  public static String getApplicationPluginName(IModule module) {
    return getModuleShortName(module) + "_ApplicationPlugin";
  }

  public static String getPluginInitializerName(IModule module) {
    return getModuleShortName(module) + "_PluginInitializer";
  }

  public static IModule getOriginalModule(TemplateQueryContext context) {
    IModule originalModule = ((TemplateQueryContext) context).getGenerator().getGeneratorSessionContext().getInvocationContext().getModule();
    assert originalModule != null;
    if (originalModule instanceof Generator) {
      originalModule = ((Generator) originalModule).getSourceLanguage();
    }
    return originalModule;
  }
}
