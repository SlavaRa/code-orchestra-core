package jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.TemplateMappingConfiguration;
import jetbrains.mps.smodel.SNodePointer;
import java.util.Collection;
import jetbrains.mps.generator.runtime.TemplateReductionRule;
import jetbrains.mps.generator.runtime.TemplateCreateRootRule;
import jetbrains.mps.generator.runtime.TemplateRootMappingRule;
import jetbrains.mps.generator.runtime.TemplateModel;
import jetbrains.mps.generator.runtime.TemplateUtil;
import jetbrains.mps.generator.template.ITemplateGenerator;
import jetbrains.mps.generator.runtime.TemplateWeavingRule;
import java.util.Collections;
import jetbrains.mps.generator.runtime.TemplateDropRootRule;
import jetbrains.mps.generator.runtime.TemplateMappingScript;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.generator.runtime.TemplateExecutionEnvironment;
import jetbrains.mps.generator.runtime.TemplateContext;
import jetbrains.mps.generator.runtime.GenerationException;
import jetbrains.mps.generator.impl.AbandonRuleInputException;
import jetbrains.mps.smodel.SReference;
import jetbrains.mps.smodel.SModelReference;
import jetbrains.mps.smodel.SNodeId;
import jetbrains.mps.generator.template.IfMacroContext;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import jetbrains.mps.generator.template.PropertyMacroContext;
import jetbrains.mps.generator.template.CreateRootRuleContext;
import jetbrains.mps.generator.impl.DefaultTemplateContext;

public class Mappingmain implements TemplateMappingConfiguration {
  private static SNodePointer reductionRule_417xrn_a0a2a = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1200267505993");
  private static SNodePointer conseq_417xrn_a0a0a4a = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1200267513574");
  private static SNodePointer reductionRule_417xrn_a0a2b = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1200268263755");
  private static SNodePointer conseq_417xrn_a0a0a4b = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1200268392650");
  private static SNodePointer reductionRule_417xrn_a0a2c = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1206448384817");
  private static SNodePointer conseq_417xrn_a0a0a4c = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1206448394459");
  private static SNodePointer reductionRule_417xrn_a0a2d = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1207142049043");
  private static SNodePointer conseq_417xrn_a0a0a4d = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1212168695672");
  private static SNodePointer reductionRule_417xrn_a0a2e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894612");
  private static SNodePointer conseq_417xrn_a0a0a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894613");
  private static SNodePointer templateNode_417xrn_a0a0a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894692");
  private static SNodePointer ifMacroRef_417xrn_a0a0a1a5a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894694");
  private static SNodePointer copySrcMacro_417xrn_a0a0a1a1a1a5a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894708");
  private static SNodePointer conseq_417xrn_a0a0a0b0b0f0c0e4 = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894705");
  private static SNodePointer templateNode_417xrn_a0a0a2a0b0b0f0c0e4 = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894706");
  private static SNodePointer templateNode_417xrn_a0a0a1a3a2a0b0b0f0c0e4 = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894707");
  private static SNodePointer copySrcMacro_417xrn_a0a0a1a6a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894718");
  private static SNodePointer ifMacroRef_417xrn_a0a0a1a7a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894728");
  private static SNodePointer copySrcMacro_417xrn_a0a0a1a1a1a7a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894741");
  private static SNodePointer conseq_417xrn_a0a0a0b0b0h0c0e4 = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894739");
  private static SNodePointer templateNode_417xrn_a0a0a2a0b0b0h0c0e4 = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894740");
  private static SNodePointer loopMacroRef_417xrn_a0a0a1a8a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894751");
  private static SNodePointer templateNode_417xrn_a0a0a3a2a2a1a8a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894750");
  private static SNodePointer propertyMacro_417xrn_c0b0b0a2a3a2a2a1a8a2a4e = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7222148688691894760");
  private static SNodePointer reductionRule_417xrn_a0a2f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031509480");
  private static SNodePointer conseq_417xrn_a0a0a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031509481");
  private static SNodePointer templateNode_417xrn_a0a0a2a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031517798");
  private static SNodePointer loopMacroRef_417xrn_a0a0a1a5a2a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031517859");
  private static SNodePointer templateNode_417xrn_a0a0a3a2a2a1a5a2a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031517848");
  private static SNodePointer templateNode_417xrn_a0a0a1a5a3a2a2a1a5a2a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031517849");
  private static SNodePointer propertyMacro_417xrn_c0b0b0a2a1a5a3a2a2a1a5a2a4f = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "6366407517031517850");
  private static SNodePointer rootMappingRule_417xrn_a0a0g = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1197207445319");
  private static SNodePointer createRootRule_417xrn_a0a0h = new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "7991477654791680146");

  private final Collection<TemplateReductionRule> rules;
  private final Collection<TemplateCreateRootRule> createRules;
  private final Collection<TemplateRootMappingRule> rootRules;
  private final TemplateModel myModel;

  public Mappingmain(TemplateModel model) {
    this.myModel = model;
    rules = TemplateUtil.<TemplateReductionRule>asCollection(new Mappingmain.ReductionRule0(), new Mappingmain.ReductionRule1(), new Mappingmain.ReductionRule2(), new Mappingmain.ReductionRule3(), new Mappingmain.ReductionRule4(), new Mappingmain.ReductionRule5());
    createRules = TemplateUtil.<TemplateCreateRootRule>asCollection(new Mappingmain.CreateRootRule0());
    rootRules = TemplateUtil.<TemplateRootMappingRule>asCollection(new Mappingmain.RootMappingRule0());
  }

  public String getName() {
    return "main";
  }

  public TemplateModel getModel() {
    return this.myModel;
  }

  public SNodePointer getMappingNode() {
    return new SNodePointer("r:00000000-0000-4000-0000-011c8959035c(jetbrains.mps.lang.findUsages.generator.baseLanguage.template.main@generator)", "1197044812173");
  }

  public boolean isApplicable(ITemplateGenerator generator) {
    return true;
  }

  public Collection<TemplateReductionRule> getReductionRules() {
    return rules;
  }

  public Collection<TemplateCreateRootRule> getCreateRules() {
    return createRules;
  }

  public Collection<TemplateRootMappingRule> getRootRules() {
    return rootRules;
  }

  public Collection<TemplateWeavingRule> getWeavingRules() {
    return Collections.emptySet();
  }

  public Collection<TemplateDropRootRule> getDropRules() {
    return Collections.emptySet();
  }

  public Collection<TemplateMappingScript> getPostScripts() {
    return Collections.emptySet();
  }

  public Collection<TemplateMappingScript> getPreScripts() {
    return Collections.emptySet();
  }

  public boolean isTopPriority() {
    return false;
  }

  public class ReductionRule0 implements TemplateReductionRule {
    public ReductionRule0() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.NodeStatement";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2a;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2a);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2a);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4a);
      Collection<SNode> tlist1 = new Templatereduce__NodeStatement().apply(environment, context);
      return tlist1;
    }
  }

  public class ReductionRule1 implements TemplateReductionRule {
    public ReductionRule1() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.ResultStatement";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2b;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2b);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2b);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4b);
      Collection<SNode> tlist1 = new Templatereduce__ResultStatement().apply(environment, context);
      return tlist1;
    }
  }

  public class ReductionRule2 implements TemplateReductionRule {
    public ReductionRule2() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.ExecuteFinderExpression";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2c;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2c);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2c);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4c);
      Collection<SNode> tlist1 = new Templatereduce__ExecuteFinderExpression().apply(environment, context);
      return tlist1;
    }
  }

  public class ReductionRule3 implements TemplateReductionRule {
    public ReductionRule3() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.CheckCancelledStatusStatement";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2d;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2d);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2d);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4d);
      Collection<SNode> tlist1 = new Templatereduce__CheckCancelledStatusStatement().apply(environment, context);
      return tlist1;
    }
  }

  public class ReductionRule4 implements TemplateReductionRule {
    public ReductionRule4() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.ExecuteFindersGetSearchResults";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2e;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2e);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2e);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4e);
      final SNode tnode1 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StaticMethodCall", false);
      try {
        environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a2a4e);
        environment.nodeCopied(context, tnode1, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894692");
        tnode1.addReference(SReference.create("classConcept", tnode1, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils")));
        tnode1.addReference(SReference.create("baseMethodDeclaration", tnode1, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils.getSearchResults(com.intellij.openapi.progress.ProgressIndicator,jetbrains.mps.smodel.SNode,jetbrains.mps.smodel.IScope,java.lang.String...):jetbrains.mps.ide.findusages.model.SearchResults")));

        {
          Collection<SNode> tlist2 = null;
          try {
            environment.getTracer().pushMacro(ifMacroRef_417xrn_a0a0a1a5a2a4e);
            if (QueriesGenerated.ifMacro_Condition_7222148688691894695(environment.getOperationContext(), new IfMacroContext(context.getInput(), ifMacroRef_417xrn_a0a0a1a5a2a4e, context, environment.getGenerator()))) {
              Collection<SNode> tlist3 = null;
              try {
                environment.getTracer().pushMacro(copySrcMacro_417xrn_a0a0a1a1a1a5a2a4e);
                final SNode copySrcInput3 = QueriesGenerated.sourceNodeQuery_7222148688691894709(environment.getOperationContext(), new SourceSubstituteMacroNodeContext(context.getInput(), copySrcMacro_417xrn_a0a0a1a1a1a5a2a4e, context, environment.getGenerator()));
                tlist3 = environment.copyNodes(TemplateUtil.singletonList(copySrcInput3), copySrcMacro_417xrn_a0a0a1a1a1a5a2a4e, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894693", null, context);
              } finally {
                environment.getTracer().closeMacro(copySrcMacro_417xrn_a0a0a1a1a1a5a2a4e);
              }
              tlist2 = tlist3;
            } else {
              environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a0b0b0f0c0e4);
              final SNode tnode4 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.GenericNewExpression", false);
              try {
                environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a2a0b0b0f0c0e4);
                environment.nodeCopied(context, tnode4, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894706");

                {
                  final SNode tnode5 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ClassCreator", false);
                  try {
                    environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a1a3a2a0b0b0f0c0e4);
                    environment.nodeCopied(context, tnode5, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894707");
                    tnode5.addReference(SReference.create("baseMethodDeclaration", tnode5, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#com.intellij.openapi.progress(com.intellij.openapi.progress@java_stub)"), SNodeId.fromString("~EmptyProgressIndicator.<init>()")));

                  } finally {
                    environment.getTracer().pushOutputNode(tnode5);
                    environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a1a3a2a0b0b0f0c0e4);
                  }
                  if (tnode5 != null) {
                    tnode4.addChild("creator", tnode5);
                  }
                  // TODO validate child 
                }
              } finally {
                environment.getTracer().pushOutputNode(tnode4);
                environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a2a0b0b0f0c0e4);
              }
              tlist2 = TemplateUtil.singletonList(tnode4);
            }

          } finally {
            environment.getTracer().closeMacro(ifMacroRef_417xrn_a0a0a1a5a2a4e);
          }
          for (SNode child6 : TemplateUtil.asNotNull(tlist2)) {
            tnode1.addChild("actualArgument", child6);
          }
          // TODO validate child 
        }
        {
          Collection<SNode> tlist7 = null;
          try {
            environment.getTracer().pushMacro(copySrcMacro_417xrn_a0a0a1a6a2a4e);
            final SNode copySrcInput7 = QueriesGenerated.sourceNodeQuery_7222148688691894719(environment.getOperationContext(), new SourceSubstituteMacroNodeContext(context.getInput(), copySrcMacro_417xrn_a0a0a1a6a2a4e, context, environment.getGenerator()));
            tlist7 = environment.copyNodes(TemplateUtil.singletonList(copySrcInput7), copySrcMacro_417xrn_a0a0a1a6a2a4e, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894717", null, context);
          } finally {
            environment.getTracer().closeMacro(copySrcMacro_417xrn_a0a0a1a6a2a4e);
          }
          for (SNode child8 : TemplateUtil.asNotNull(tlist7)) {
            tnode1.addChild("actualArgument", child8);
          }
          // TODO validate child 
        }
        {
          Collection<SNode> tlist9 = null;
          try {
            environment.getTracer().pushMacro(ifMacroRef_417xrn_a0a0a1a7a2a4e);
            if (QueriesGenerated.ifMacro_Condition_7222148688691894729(environment.getOperationContext(), new IfMacroContext(context.getInput(), ifMacroRef_417xrn_a0a0a1a7a2a4e, context, environment.getGenerator()))) {
              Collection<SNode> tlist10 = null;
              try {
                environment.getTracer().pushMacro(copySrcMacro_417xrn_a0a0a1a1a1a7a2a4e);
                final SNode copySrcInput10 = QueriesGenerated.sourceNodeQuery_7222148688691894742(environment.getOperationContext(), new SourceSubstituteMacroNodeContext(context.getInput(), copySrcMacro_417xrn_a0a0a1a1a1a7a2a4e, context, environment.getGenerator()));
                tlist10 = environment.copyNodes(TemplateUtil.singletonList(copySrcInput10), copySrcMacro_417xrn_a0a0a1a1a1a7a2a4e, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894727", null, context);
              } finally {
                environment.getTracer().closeMacro(copySrcMacro_417xrn_a0a0a1a1a1a7a2a4e);
              }
              tlist9 = tlist10;
            } else {
              environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a0b0b0h0c0e4);
              final SNode tnode11 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StaticMethodCall", false);
              try {
                environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a2a0b0b0h0c0e4);
                environment.nodeCopied(context, tnode11, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894740");
                tnode11.addReference(SReference.create("classConcept", tnode11, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.project(jetbrains.mps.project@java_stub)"), SNodeId.fromString("~GlobalScope")));
                tnode11.addReference(SReference.create("baseMethodDeclaration", tnode11, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.project(jetbrains.mps.project@java_stub)"), SNodeId.fromString("~GlobalScope.getInstance():jetbrains.mps.project.GlobalScope")));

              } finally {
                environment.getTracer().pushOutputNode(tnode11);
                environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a2a0b0b0h0c0e4);
              }
              tlist9 = TemplateUtil.singletonList(tnode11);
            }

          } finally {
            environment.getTracer().closeMacro(ifMacroRef_417xrn_a0a0a1a7a2a4e);
          }
          for (SNode child12 : TemplateUtil.asNotNull(tlist9)) {
            tnode1.addChild("actualArgument", child12);
          }
          // TODO validate child 
        }
        {
          final List<SNode> tlist13 = new ArrayList();
          try {
            environment.getTracer().pushMacro(loopMacroRef_417xrn_a0a0a1a8a2a4e);
            final Iterable<SNode> loopList13 = QueriesGenerated.sourceNodesQuery_7222148688691894752(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context.getInput(), null, loopMacroRef_417xrn_a0a0a1a8a2a4e, context, environment.getGenerator()));
            for (SNode itnode13 : loopList13) {
              if (itnode13 == null) {
                continue;
              }
              boolean inputChanged13 = context.getInput() != itnode13;
              try {
                if (inputChanged13) {
                  environment.getTracer().pushInputNode(itnode13);
                }
                TemplateContext context13 = context.subContext(null, itnode13);
                final SNode tnode14 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StringLiteral", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a3a2a2a1a8a2a4e);
                  environment.nodeCopied(context13, tnode14, "tpl/r:00000000-0000-4000-0000-011c8959035c/7222148688691894750");
                  tnode14.setProperty("value", TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_7222148688691894761(environment.getOperationContext(), new PropertyMacroContext(context13.getInput(), "", propertyMacro_417xrn_c0b0b0a2a3a2a2a1a8a2a4e, context13, environment.getGenerator()))));

                } finally {
                  environment.getTracer().pushOutputNode(tnode14);
                  environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a3a2a2a1a8a2a4e);
                }
                if (tnode14 != null) {
                  tlist13.add(tnode14);
                }
              } finally {
                if (inputChanged13) {
                  environment.getTracer().closeInputNode(itnode13);
                }
              }
            }
          } finally {
            environment.getTracer().closeMacro(loopMacroRef_417xrn_a0a0a1a8a2a4e);
          }
          for (SNode child15 : TemplateUtil.asNotNull(tlist13)) {
            tnode1.addChild("actualArgument", child15);
          }
          // TODO validate child 
        }
      } finally {
        environment.getTracer().pushOutputNode(tnode1);
        environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a2a4e);
      }
      return TemplateUtil.singletonList(tnode1);
    }
  }

  public class ReductionRule5 implements TemplateReductionRule {
    public ReductionRule5() {
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.MakeResultProvider";
    }

    public SNodePointer getRuleNode() {
      return reductionRule_417xrn_a0a2f;
    }

    public Collection<SNode> tryToApply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {

      environment.getTracer().pushRule(reductionRule_417xrn_a0a2f);
      try {
        return apply(context, environment.getEnvironment(context.getInput(), this));
      } catch (AbandonRuleInputException e) {
        return Collections.emptyList();
      } finally {
        environment.getTracer().closeRule(reductionRule_417xrn_a0a2f);
      }

    }

    private Collection<SNode> apply(final TemplateContext context, final TemplateExecutionEnvironment environment) throws GenerationException {
      environment.getTracer().pushRuleConsequence(conseq_417xrn_a0a0a4f);
      final SNode tnode1 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StaticMethodCall", false);
      try {
        environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a2a4f);
        environment.nodeCopied(context, tnode1, "tpl/r:00000000-0000-4000-0000-011c8959035c/6366407517031517798");
        tnode1.addReference(SReference.create("baseMethodDeclaration", tnode1, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils.makeProvider(jetbrains.mps.ide.findusages.findalgorithm.finders.IFinder...):jetbrains.mps.ide.findusages.model.IResultProvider")));
        tnode1.addReference(SReference.create("classConcept", tnode1, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils")));

        {
          final List<SNode> tlist2 = new ArrayList();
          try {
            environment.getTracer().pushMacro(loopMacroRef_417xrn_a0a0a1a5a2a4f);
            final Iterable<SNode> loopList2 = QueriesGenerated.sourceNodesQuery_6366407517031517860(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context.getInput(), null, loopMacroRef_417xrn_a0a0a1a5a2a4f, context, environment.getGenerator()));
            for (SNode itnode2 : loopList2) {
              if (itnode2 == null) {
                continue;
              }
              boolean inputChanged2 = context.getInput() != itnode2;
              try {
                if (inputChanged2) {
                  environment.getTracer().pushInputNode(itnode2);
                }
                TemplateContext context2 = context.subContext(null, itnode2);
                final SNode tnode3 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StaticMethodCall", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a3a2a2a1a5a2a4f);
                  environment.nodeCopied(context2, tnode3, "tpl/r:00000000-0000-4000-0000-011c8959035c/6366407517031517848");
                  tnode3.addReference(SReference.create("baseMethodDeclaration", tnode3, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils.getFinderByClassName(java.lang.String):jetbrains.mps.ide.findusages.findalgorithm.finders.GeneratedFinder")));
                  tnode3.addReference(SReference.create("classConcept", tnode3, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.ide.findusages.view(jetbrains.mps.ide.findusages.view@java_stub)"), SNodeId.fromString("~FindUtils")));

                  {
                    final SNode tnode4 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StringLiteral", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_417xrn_a0a0a1a5a3a2a2a1a5a2a4f);
                      environment.nodeCopied(context2, tnode4, "tpl/r:00000000-0000-4000-0000-011c8959035c/6366407517031517849");
                      tnode4.setProperty("value", TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_6366407517031517851(environment.getOperationContext(), new PropertyMacroContext(context2.getInput(), "", propertyMacro_417xrn_c0b0b0a2a1a5a3a2a2a1a5a2a4f, context2, environment.getGenerator()))));

                    } finally {
                      environment.getTracer().pushOutputNode(tnode4);
                      environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a1a5a3a2a2a1a5a2a4f);
                    }
                    if (tnode4 != null) {
                      tnode3.addChild("actualArgument", tnode4);
                    }
                    // TODO validate child 
                  }
                } finally {
                  environment.getTracer().pushOutputNode(tnode3);
                  environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a3a2a2a1a5a2a4f);
                }
                if (tnode3 != null) {
                  tlist2.add(tnode3);
                }
              } finally {
                if (inputChanged2) {
                  environment.getTracer().closeInputNode(itnode2);
                }
              }
            }
          } finally {
            environment.getTracer().closeMacro(loopMacroRef_417xrn_a0a0a1a5a2a4f);
          }
          for (SNode child5 : TemplateUtil.asNotNull(tlist2)) {
            tnode1.addChild("actualArgument", child5);
          }
          // TODO validate child 
        }
      } finally {
        environment.getTracer().pushOutputNode(tnode1);
        environment.getTracer().closeTemplateNode(templateNode_417xrn_a0a0a2a4f);
      }
      return TemplateUtil.singletonList(tnode1);
    }
  }

  public class RootMappingRule0 implements TemplateRootMappingRule {
    public RootMappingRule0() {
    }

    public SNodePointer getRuleNode() {
      return rootMappingRule_417xrn_a0a0g;
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.lang.findUsages.structure.FinderDeclaration";
    }

    public boolean keepSourceRoot() {
      return false;
    }

    public boolean isApplicable(TemplateExecutionEnvironment environment, TemplateContext context) throws GenerationException {
      return true;
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      Collection<SNode> result = new TemplateFinderClass().apply(environment, context);
      return result;
    }
  }

  public class CreateRootRule0 implements TemplateCreateRootRule {
    public CreateRootRule0() {
    }

    public SNodePointer getRuleNode() {
      return createRootRule_417xrn_a0a0h;
    }

    public boolean isApplicable(TemplateExecutionEnvironment environment, TemplateContext context) throws GenerationException {
      if (!(QueriesGenerated.createRootRule_Condition_7991477654791680147(environment.getOperationContext(), new CreateRootRuleContext(createRootRule_417xrn_a0a0h, environment.getGenerator())))) {
        return false;
      }
      return true;
    }

    public Collection<SNode> apply(TemplateExecutionEnvironment environment) throws GenerationException {
      Collection<SNode> result = new TemplateFindUsagesDescriptor().apply(environment, new DefaultTemplateContext(null));
      return result;
    }
  }
}
