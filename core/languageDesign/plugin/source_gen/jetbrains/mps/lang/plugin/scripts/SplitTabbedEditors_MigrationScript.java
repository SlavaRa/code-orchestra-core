package jetbrains.mps.lang.plugin.scripts;

/*Generated by MPS */

import jetbrains.mps.lang.script.runtime.BaseMigrationScript;
import jetbrains.mps.smodel.IOperationContext;
import jetbrains.mps.lang.script.runtime.AbstractMigrationRefactoring;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.smodel.SModel;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.IVisitor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import java.util.List;
import java.util.ArrayList;
import java.util.Set;
import java.util.HashSet;
import jetbrains.mps.smodel.SModelUtil_new;
import jetbrains.mps.project.GlobalScope;
import jetbrains.mps.smodel.SReference;
import jetbrains.mps.smodel.SModelReference;
import jetbrains.mps.smodel.SNodeId;
import jetbrains.mps.lang.typesystem.runtime.HUtil;

public class SplitTabbedEditors_MigrationScript extends BaseMigrationScript {
  public SplitTabbedEditors_MigrationScript(IOperationContext operationContext) {
    super("Split Tabbed Editors");
    this.addRefactoring(new AbstractMigrationRefactoring(operationContext) {
      public String getName() {
        return "Split tabbed editors";
      }

      public String getAdditionalInfo() {
        return "Split tabbed editors";
      }

      public String getFqNameOfConceptToSearchInstances() {
        return "jetbrains.mps.lang.plugin.structure.TabbedEditorDeclaration";
      }

      public boolean isApplicableInstanceNode(SNode node) {
        return true;
      }

      public void doUpdateInstanceNode(SNode node) {
        SModel model = SNodeOperations.getModel(node);

        SNode helperClass = SModelOperations.createNewRootNode(SNodeOperations.getModel(node), "jetbrains.mps.baseLanguage.structure.ClassConcept", null);
        SPropertyOperations.set(helperClass, "name", SPropertyOperations.getString(node, "name") + "_Helper");
        final SNode p1 = new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a4a4a0a0a1a0().createNode();
        final SNode p2 = new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a5a4a0a0a1a0().createNode();

        SNode method = new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a7a4a0a0a1a0().createNode(p1, p2, SLinkOperations.getTarget(SLinkOperations.getTarget(node, "getMainConceptBlock", true), "body", true));
        ListSequence.fromList(SNodeOperations.getDescendants(method, "jetbrains.mps.lang.plugin.structure.ConceptFunctionParameter_node", false, new String[]{})).visitAll(new IVisitor<SNode>() {
          public void visit(SNode it) {
            SNodeOperations.replaceWithAnother(it, new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a1a0a0a0i0e0a0a0b0a().createNode(p1));
          }
        });
        ListSequence.fromList(SNodeOperations.getDescendants(method, "jetbrains.mps.lang.plugin.structure.ConceptFunctionParameter_OperationContext", false, new String[]{})).visitAll(new IVisitor<SNode>() {
          public void visit(SNode it) {
            SNodeOperations.replaceWithAnother(it, new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a1a0a0a0j0e0a0a0b0a().createNode(p2));
          }
        });
        ListSequence.fromList(SLinkOperations.getTargets(helperClass, "staticMethod", true)).addElement(method);

        SNode callHelperStmt = new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a21a4a0a0a1a0().createNode(helperClass, SConceptOperations.createNewNode("jetbrains.mps.lang.plugin.structure.ConceptFunctionParameter_node", null), SConceptOperations.createNewNode("jetbrains.mps.lang.plugin.structure.ConceptFunctionParameter_OperationContext", null), method);

        SNode order = SModelOperations.createNewRootNode(model, "jetbrains.mps.lang.plugin.structure.Order", null);
        SPropertyOperations.set(order, "name", SPropertyOperations.getString(node, "name"));

        List<SNode> tabs = ListSequence.fromListWithValues(new ArrayList<SNode>(), SLinkOperations.getTargets(node, "tabs", true));
        for (SNode tab : ListSequence.fromList(tabs)) {
          SNode newTab = new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a0a81a4a0a0a1a0().createNode(SPropertyOperations.getString(tab, "name"), SPropertyOperations.getString(tab, "shortcutChar"), SLinkOperations.getTarget(node, "mainConcept", false), SLinkOperations.getTarget(node, "mainConcept", false));

          // todo rewrite. this code is due to bad behavior of quotations in this case 
          SPropertyOperations.set(newTab, "commandOnCreate", "" + !(SPropertyOperations.getBoolean(tab, "outsideCommand")));
          SLinkOperations.setTarget(newTab, "order", new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a2a4a81a4a0a0a1a0().createNode(order), true);
          ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(SLinkOperations.getTarget(newTab, "baseNodeBlock", true), "body", true), "statement", true)).addElement(SNodeOperations.copyNode(callHelperStmt));

          if (SLinkOperations.getTarget(tab, "initBlock", true) != null) {
            SLinkOperations.setNewChild(newTab, "listenBlock", "jetbrains.mps.lang.plugin.structure.ListenBlock");
            SLinkOperations.setTarget(SLinkOperations.getTarget(newTab, "listenBlock", true), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(tab, "initBlock", true), "body", true), true);
          }
          if (SNodeOperations.isInstanceOf(tab, "jetbrains.mps.lang.plugin.structure.MultitabbedEditorTab")) {
            SNode oldTab = SNodeOperations.cast(tab, "jetbrains.mps.lang.plugin.structure.MultitabbedEditorTab");

            if ((SLinkOperations.getTarget(oldTab, "newCreateBlock", true) != null)) {
              SLinkOperations.setNewChild(newTab, "createBlock", "jetbrains.mps.lang.plugin.structure.NewCreateBlock");
              SLinkOperations.setTarget(SLinkOperations.getTarget(newTab, "createBlock", true), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "newCreateBlock", true), "body", true), true);
            }

            if ((SLinkOperations.getTarget(oldTab, "createBlock", true) != null)) {
              SLinkOperations.setNewChild(newTab, "createBlock", "jetbrains.mps.lang.plugin.structure.NewCreateBlock");
              SLinkOperations.setTarget(SLinkOperations.getTarget(newTab, "createBlock", true), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "createBlock", true), "body", true), true);
            }

            if ((SLinkOperations.getTarget(oldTab, "getConceptsBlock", true) != null)) {
              SLinkOperations.setNewChild(newTab, "conceptsBlock", "jetbrains.mps.lang.plugin.structure.GetConceptsBlock");
              SLinkOperations.setTarget(SLinkOperations.getTarget(newTab, "conceptsBlock", true), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "getConceptsBlock", true), "body", true), true);
            }

            SLinkOperations.setNewChild(newTab, "nodesBlock", "jetbrains.mps.lang.plugin.structure.GetNodesBlock");
            SLinkOperations.setTarget(SNodeOperations.cast(SLinkOperations.getTarget(newTab, "nodesBlock", true), "jetbrains.mps.lang.plugin.structure.GetNodesBlock"), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "getNodesBlock", true), "body", true), true);
          } else {
            SNode oldTab = SNodeOperations.cast(tab, "jetbrains.mps.lang.plugin.structure.SingletabbedEditorTab");

            if ((SLinkOperations.getTarget(oldTab, "createBlock", true) != null)) {
              SLinkOperations.setNewChild(newTab, "createBlock", "jetbrains.mps.lang.plugin.structure.NewCreateBlock");
              SLinkOperations.setTarget(SLinkOperations.getTarget(newTab, "createBlock", true), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "createBlock", true), "body", true), true);
            }

            SLinkOperations.setNewChild(newTab, "nodesBlock", "jetbrains.mps.lang.plugin.structure.GetNodeBlock");
            SLinkOperations.setTarget(SNodeOperations.cast(SLinkOperations.getTarget(newTab, "nodesBlock", true), "jetbrains.mps.lang.plugin.structure.GetNodeBlock"), "body", SLinkOperations.getTarget(SLinkOperations.getTarget(oldTab, "getNodeBlock", true), "body", true), true);
          }

          SModelOperations.addRootNode(model, newTab);
          ListSequence.fromList(SLinkOperations.getTargets(order, "tab", true)).addElement(new SplitTabbedEditors_MigrationScript.QuotationClass_w50lnh_a0a0l0s0e0a0a0b0a().createNode(newTab));
        }

        SNodeOperations.deleteNode(node);
      }

      public boolean isShowAsIntention() {
        return false;
      }
    });
  }

  public static class QuotationClass_w50lnh_a0a4a4a0a0a1a0 {
    public QuotationClass_w50lnh_a0a4a4a0a0a1a0() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ParameterDeclaration", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("name", "node");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.smodel.structure.SNodeType", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode_1.addChild("type", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a0a5a4a0a0a1a0 {
    public QuotationClass_w50lnh_a0a5a4a0a0a1a0() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ParameterDeclaration", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("name", "context");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ClassifierType", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.addReference(SReference.create("classifier", quotedNode1_4, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.smodel(jetbrains.mps.smodel@java_stub)"), SNodeId.fromString("~IOperationContext")));
          quotedNode_1.addChild("type", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a0a7a4a0a0a1a0 {
    public QuotationClass_w50lnh_a0a7a4a0a0a1a0() {
    }

    public SNode createNode(Object parameter_15, Object parameter_16, Object parameter_17) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      SNode quotedNode_5 = null;
      SNode quotedNode_6 = null;
      SNode quotedNode_7 = null;
      SNode quotedNode_8 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StaticMethodDeclaration", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_9 = quotedNode_1;
        quotedNode1_9.setProperty("name", "getBaseNode");
        {
          quotedNode_2 = (SNode) parameter_15;
          SNode quotedNode1_10;
          if (_parameterValues_129834374.contains(quotedNode_2)) {
            quotedNode1_10 = HUtil.copyIfNecessary(quotedNode_2);
          } else {
            _parameterValues_129834374.add(quotedNode_2);
            quotedNode1_10 = quotedNode_2;
          }
          if (quotedNode1_10 != null) {
            quotedNode_1.addChild("parameter", HUtil.copyIfNecessary(quotedNode1_10));
          }
        }
        {
          quotedNode_3 = (SNode) parameter_16;
          SNode quotedNode1_11;
          if (_parameterValues_129834374.contains(quotedNode_3)) {
            quotedNode1_11 = HUtil.copyIfNecessary(quotedNode_3);
          } else {
            _parameterValues_129834374.add(quotedNode_3);
            quotedNode1_11 = quotedNode_3;
          }
          if (quotedNode1_11 != null) {
            quotedNode_1.addChild("parameter", HUtil.copyIfNecessary(quotedNode1_11));
          }
        }
        {
          quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.smodel.structure.SNodeType", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_12 = quotedNode_4;
          quotedNode_1.addChild("returnType", quotedNode1_12);
        }
        {
          quotedNode_5 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.PublicVisibility", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_13 = quotedNode_5;
          quotedNode_1.addChild("visibility", quotedNode1_13);
        }
        {
          quotedNode_6 = (SNode) parameter_17;
          SNode quotedNode1_14;
          if (_parameterValues_129834374.contains(quotedNode_6)) {
            quotedNode1_14 = HUtil.copyIfNecessary(quotedNode_6);
          } else {
            _parameterValues_129834374.add(quotedNode_6);
            quotedNode1_14 = quotedNode_6;
          }
          if (quotedNode1_14 != null) {
            quotedNode_1.addChild("body", HUtil.copyIfNecessary(quotedNode1_14));
          }
        }
        result = quotedNode1_9;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a1a0a0a0i0e0a0a0b0a {
    public QuotationClass_w50lnh_a1a0a0a0i0e0a0a0b0a() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ParameterReference", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setReferent("variableDeclaration", (SNode) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a1a0a0a0j0e0a0a0b0a {
    public QuotationClass_w50lnh_a1a0a0a0j0e0a0a0b0a() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ParameterReference", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setReferent("variableDeclaration", (SNode) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a0a21a4a0a0a1a0 {
    public QuotationClass_w50lnh_a0a21a4a0a0a1a0() {
    }

    public SNode createNode(Object parameter_9, Object parameter_10, Object parameter_11, Object parameter_12) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ExpressionStatement", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_5 = quotedNode_1;
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StaticMethodCall", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_6 = quotedNode_2;
          quotedNode1_6.setReferent("baseMethodDeclaration", (SNode) parameter_12);
          quotedNode1_6.setReferent("classConcept", (SNode) parameter_9);
          {
            quotedNode_3 = (SNode) parameter_10;
            SNode quotedNode1_7;
            if (_parameterValues_129834374.contains(quotedNode_3)) {
              quotedNode1_7 = HUtil.copyIfNecessary(quotedNode_3);
            } else {
              _parameterValues_129834374.add(quotedNode_3);
              quotedNode1_7 = quotedNode_3;
            }
            if (quotedNode1_7 != null) {
              quotedNode_2.addChild("actualArgument", HUtil.copyIfNecessary(quotedNode1_7));
            }
          }
          {
            quotedNode_4 = (SNode) parameter_11;
            SNode quotedNode1_8;
            if (_parameterValues_129834374.contains(quotedNode_4)) {
              quotedNode1_8 = HUtil.copyIfNecessary(quotedNode_4);
            } else {
              _parameterValues_129834374.add(quotedNode_4);
              quotedNode1_8 = quotedNode_4;
            }
            if (quotedNode1_8 != null) {
              quotedNode_2.addChild("actualArgument", HUtil.copyIfNecessary(quotedNode1_8));
            }
          }
          quotedNode_1.addChild("expression", quotedNode1_6);
        }
        result = quotedNode1_5;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a0a0a81a4a0a0a1a0 {
    public QuotationClass_w50lnh_a0a0a81a4a0a0a1a0() {
    }

    public SNode createNode(Object parameter_21, Object parameter_22, Object parameter_23, Object parameter_24) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      SNode quotedNode_5 = null;
      SNode quotedNode_6 = null;
      SNode quotedNode_7 = null;
      SNode quotedNode_8 = null;
      SNode quotedNode_9 = null;
      SNode quotedNode_10 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.EditorTab", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_11 = quotedNode_1;
        quotedNode1_11.setProperty("name", (String) parameter_21);
        quotedNode1_11.setProperty("shortcutChar", (String) parameter_22);
        quotedNode1_11.setReferent("baseNodeConcept", (SNode) parameter_23);
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.IsApplicableTabBlock", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_12 = quotedNode_2;
          {
            quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StatementList", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_13 = quotedNode_4;
            {
              quotedNode_6 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.ExpressionStatement", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_14 = quotedNode_6;
              {
                quotedNode_7 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.DotExpression", null, GlobalScope.getInstance(), false);
                SNode quotedNode1_15 = quotedNode_7;
                {
                  quotedNode_8 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.ConceptFunctionParameter_node", null, GlobalScope.getInstance(), false);
                  SNode quotedNode1_16 = quotedNode_8;
                  quotedNode_7.addChild("operand", quotedNode1_16);
                }
                {
                  quotedNode_9 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation", null, GlobalScope.getInstance(), false);
                  SNode quotedNode1_17 = quotedNode_9;
                  {
                    quotedNode_10 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.smodel.structure.RefConcept_Reference", null, GlobalScope.getInstance(), false);
                    SNode quotedNode1_18 = quotedNode_10;
                    quotedNode1_18.setReferent("conceptDeclaration", (SNode) parameter_24);
                    quotedNode_9.addChild("conceptArgument", quotedNode1_18);
                  }
                  quotedNode_7.addChild("operation", quotedNode1_17);
                }
                quotedNode_6.addChild("expression", quotedNode1_15);
              }
              quotedNode_4.addChild("statement", quotedNode1_14);
            }
            quotedNode_2.addChild("body", quotedNode1_13);
          }
          quotedNode_1.addChild("isApplicableBlock", quotedNode1_12);
        }
        {
          quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.BaseNodeBlock", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_19 = quotedNode_3;
          {
            quotedNode_5 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StatementList", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_20 = quotedNode_5;
            quotedNode_3.addChild("body", quotedNode1_20);
          }
          quotedNode_1.addChild("baseNodeBlock", quotedNode1_19);
        }
        result = quotedNode1_11;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a2a4a81a4a0a0a1a0 {
    public QuotationClass_w50lnh_a2a4a81a4a0a0a1a0() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.OrderReference", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setReferent("order", (SNode) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_w50lnh_a0a0l0s0e0a0a0b0a {
    public QuotationClass_w50lnh_a0a0l0s0e0a0a0b0a() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.lang.plugin.structure.EditorTabReference", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setReferent("editorTab", (SNode) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }
}
