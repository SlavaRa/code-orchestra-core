package layeredLayoutTest;

/*Generated by MPS */

import jetbrains.mps.graphLayout.algorithms.Dfs;
import jetbrains.mps.graphLayout.graph.Graph;
import jetbrains.mps.graphLayout.graph.Edge;
import jetbrains.mps.graphLayout.graph.Node;
import jetbrains.mps.internal.collections.runtime.MapSequence;

public class CheckCycles extends Dfs {
  private boolean hasCycles;

  public CheckCycles() {
  }

  public boolean hasCycle(Graph graph) {
    hasCycles = false;
    doDfs(graph);
    return hasCycles;
  }

  @Override
  protected void processEdge(Edge edge, Node source) {
    if (MapSequence.fromMap(getDfsState()).get(edge.getTarget()) == 0) {
      hasCycles = false;
    }
  }
}
