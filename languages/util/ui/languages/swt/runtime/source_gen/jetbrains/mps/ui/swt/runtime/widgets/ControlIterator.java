package jetbrains.mps.ui.swt.runtime.widgets;

/*Generated by MPS */

import java.util.Iterator;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Composite;
import java.util.NoSuchElementException;

public class ControlIterator implements Iterator<Control> {
  private Control[] children;
  private int idx = -1;

  public ControlIterator(Composite panel) {
    this.children = panel.getChildren();
  }

  public boolean hasNext() {
    return this.nextIdx() >= 0;
  }

  public Control next() {
    this.idx = this.nextIdx();
    if (this.idx < 0) {
      throw new NoSuchElementException();
    }
    return this.children[this.idx];
  }

  public void remove() {
    if (this.idx < 0 || this.children[this.idx] == null) {
      throw new IllegalStateException();
    }
    this.children[this.idx].dispose();
    this.children[this.idx] = null;
  }

  public boolean accept(Control item) {
    return true;
  }

  private int nextIdx() {
    for (int i = this.idx + 1; i < this.children.length; i++) {
      if (this.accept(this.children[i])) {
        return i;
      }
    }
    return -1;
  }
}
