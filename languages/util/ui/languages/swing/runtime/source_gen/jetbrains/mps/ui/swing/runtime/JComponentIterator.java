package jetbrains.mps.ui.swing.runtime;

/*Generated by MPS */

import java.util.Iterator;
import javax.swing.JComponent;
import javax.swing.JPanel;
import java.awt.Component;
import java.util.NoSuchElementException;

public class JComponentIterator implements Iterator<JComponent> {
  private JPanel panel;
  private Component[] children;
  private int idx = -1;

  public JComponentIterator(JPanel panel) {
    this.panel = panel;
    this.children = panel.getComponents();
  }

  public boolean hasNext() {
    return this.nextIdx() >= 0;
  }

  public JComponent next() {
    this.idx = this.nextIdx();
    if (this.idx < 0) {
      throw new NoSuchElementException();
    }
    return (JComponent) this.children[this.idx];
  }

  public void remove() {
    if (this.idx < 0 || this.children[this.idx] == null) {
      throw new IllegalStateException();
    }
    this.panel.remove(this.children[this.idx]);
    this.children[this.idx] = null;
  }

  public boolean accept(JComponent item) {
    return true;
  }

  private int nextIdx() {
    for (int i = this.idx + 1; i < this.children.length; i++) {
      if (this.accept((JComponent) this.children[i])) {
        return i;
      }
    }
    return -1;
  }
}
