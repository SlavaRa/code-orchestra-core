package jetbrains.mps.build.packaging.plugin;

/*Generated by MPS */

import jetbrains.mps.execution.api.configurations.BaseMpsBeforeTaskProvider;
import com.intellij.openapi.util.Key;
import jetbrains.mps.smodel.SNode;
import com.intellij.openapi.project.Project;

public class GenerateBuild_BeforeTask extends BaseMpsBeforeTaskProvider<GenerateBuild_BeforeTask.GenerateBuild_BeforeTask_RunTask> {
  private static final Key<GenerateBuild_BeforeTask.GenerateBuild_BeforeTask_RunTask> KEY = Key.create("jetbrains.mps.build.packaging.plugin.GenerateBuild_BeforeTask");

  public GenerateBuild_BeforeTask() {
    super("Generate Build");
  }

  protected GenerateBuild_BeforeTask.GenerateBuild_BeforeTask_RunTask createTaskImpl() {
    return new GenerateBuild_BeforeTask.GenerateBuild_BeforeTask_RunTask();
  }

  public Key<GenerateBuild_BeforeTask.GenerateBuild_BeforeTask_RunTask> getId() {
    return KEY;
  }

  public static class GenerateBuild_BeforeTask_RunTask extends BaseMpsBeforeTaskProvider.BaseMpsBeforeRunTask {
    private SNode myLayout;

    public GenerateBuild_BeforeTask_RunTask() {
    }

    public boolean configure(SNode layout) {
      myLayout = layout;
      return true;
    }

    public boolean execute(Project project) {
      // this task would be obsolete, when we larn to generate packaging properly with facets 
      // then we could use Make task instead of this 
      return GenerateBuildUtil.generate(myLayout, project, true);
    }
  }
}
