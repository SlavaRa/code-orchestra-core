package jetbrains.mps.vcs.annotate;

/*Generated by MPS */

import com.intellij.openapi.actionSystem.ToggleAction;
import com.intellij.openapi.vcs.actions.ShowShortenNames;
import com.intellij.openapi.vcs.actions.ShowAnnotationColorsAction;
import java.util.Map;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import com.intellij.openapi.actionSystem.AnActionEvent;
import com.intellij.ide.util.PropertiesComponent;

/*package*/ class ViewAction extends ToggleAction {
  public static String SHORTEN_NAMES = ShowShortenNames.KEY;
  public static String COLORS = ShowAnnotationColorsAction.KEY;
  private static Map<String, String> KEYS_TO_TITLES = MapSequence.<String, String>fromMapAndKeysArray(new HashMap<String, String>(), SHORTEN_NAMES, COLORS).withValues("Short names", "Colors");

  private AnnotationColumn myColumn;
  private String myKey;

  public ViewAction(AnnotationColumn column, String key) {
    super(MapSequence.fromMap(KEYS_TO_TITLES).get(key));
    myKey = key;
    myColumn = column;
  }

  public boolean isSelected(AnActionEvent event) {
    return isSet(myKey);
  }

  public void setSelected(AnActionEvent event, boolean selected) {
    PropertiesComponent.getInstance().setValue(myKey, String.valueOf(selected));
    myColumn.invalidateLayout();
  }

  public static boolean isSet(String key) {
    return PropertiesComponent.getInstance().getBoolean(key, true);
  }
}
