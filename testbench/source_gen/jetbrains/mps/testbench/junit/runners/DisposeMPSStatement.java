package jetbrains.mps.testbench.junit.runners;

/*Generated by MPS */

import org.junit.runners.model.Statement;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.TestMain;
import org.junit.internal.runners.model.MultipleFailureException;

public class DisposeMPSStatement extends Statement {
  private Statement myPrev;

  public DisposeMPSStatement(Statement prev) {
    myPrev = prev;
  }

  public void evaluate() throws Throwable {
    List<Throwable> errors = new ArrayList<Throwable>();
    try {
      if (myPrev != null) {
        myPrev.evaluate();
      }
    } catch (Throwable th) {
      errors.add(th);
    } finally {
      try {
        TestMain.disposeMPS();
      } catch (Throwable th) {
        errors.add(th);
      }
    }
    MultipleFailureException.assertEmpty(errors);
  }
}
