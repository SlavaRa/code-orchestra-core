package jetbrains.mps.workbench.dialogs.project.components.parts.creators;

/*Generated by MPS */

import com.intellij.openapi.util.Computable;
import java.util.List;
import jetbrains.mps.project.structure.modules.ClassPathEntry;
import jetbrains.mps.workbench.dialogs.project.IBindedDialog;
import jetbrains.mps.ide.ui.filechoosers.treefilechooser.TreeFileChooser;
import jetbrains.mps.vfs.IFile;
import java.util.ArrayList;

public class ClassPathChooser implements Computable<List<ClassPathEntry>> {
  private final IBindedDialog myOwner;

  public ClassPathChooser(IBindedDialog owner) {
    myOwner = owner;
  }

  public List<ClassPathEntry> compute() {
    TreeFileChooser chooser = new TreeFileChooser();
    chooser.setMode(TreeFileChooser.MODE_FILES_AND_DIRECTORIES);
    List<IFile> files = chooser.showMultiSelectionDialog(myOwner.getMainComponent());
    List<ClassPathEntry> result = new ArrayList<ClassPathEntry>();
    for (IFile file : files) {
      ClassPathEntry cpe = new ClassPathEntry();
      cpe.setPath(file.getPath());
      result.add(cpe);
    }
    return result;
  }
}
