package jetbrains.mps.workbench.dialogs.project.components.parts.actions;

/*Generated by MPS */

import javax.swing.JTable;
import jetbrains.mps.workbench.dialogs.project.components.parts.actions.icons.Icons;
import com.intellij.openapi.actionSystem.AnActionEvent;

public abstract class TableRemoveAction extends BaseValidatedAction {
  private JTable myTable;

  public TableRemoveAction(JTable table) {
    super("Remove", "Remove", Icons.REMOVE);
    myTable = table;
  }

  @Override
  public void update(AnActionEvent e) {
    super.update(e);
    e.getPresentation().setEnabled(myTable.getSelectedRowCount() != 0);
  }

  public final void doPerform(AnActionEvent e) {
    int index = myTable.getSelectedRow();
    for (int i : myTable.getSelectedRows()) {
      if (i < index) {
        index = i;
      }
    }
    doRemove(e);
    int listSize = myTable.getModel().getRowCount();
    if (index >= listSize) {
      index--;
    } else
    if (index < 0 && listSize > 0) {
      index = 0;
    }
    if (index > -1) {
      myTable.getSelectionModel().setSelectionInterval(index, index);
    }
  }

  protected abstract void doRemove(AnActionEvent e);
}
