package jetbrains.mps.workbench.dialogs.project.components.parts.editors;

/*Generated by MPS */

import javax.swing.DefaultCellEditor;
import jetbrains.mps.workbench.dialogs.project.utildialogs.addmodelimport.ImportProperties;
import javax.swing.JComboBox;
import jetbrains.mps.workbench.dialogs.project.components.parts.renderers.ModuleImportRenderer;
import java.awt.Component;
import javax.swing.JTable;
import jetbrains.mps.project.structure.modules.ModuleReference;

public class ModuleImportEditor extends DefaultCellEditor {
  private ImportProperties myProps;
  private JComboBox myComboBox;
  private boolean myForModel;

  public ModuleImportEditor(ImportProperties props, boolean forModel) {
    super(new JComboBox());
    myComboBox = (JComboBox) editorComponent;
    myProps = props;
    myForModel = forModel;
    myComboBox.setRenderer(new ModuleImportRenderer(null, null));
  }

  @Override
  public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
    myComboBox.removeAllItems();
    myComboBox.addItem(null);
    for (ModuleReference modRef : (myForModel ?
      myProps.getModulesForModel(row) :
      myProps.getModulesForLanguage(row)
    )) {
      myComboBox.addItem(modRef);
    }
    return super.getTableCellEditorComponent(table, value, isSelected, row, column);
  }
}
